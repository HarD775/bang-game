#!/bin/sh
#
# $Id$
#
# Command line launcher for the Bang! development server

ROOT=`dirname $0`/..
CLASS=com.threerings.bang.server.BangServer
HOSTNAME=`hostname`

# this may be overridden layer
NODE="frontier_town"

SARGS="-server -Djava.awt.headless=true"
SARGS="$SARGS -Dbang.home=$ROOT -Dhostname=$HOSTNAME -Dis_node=true"
SARGS="$SARGS -Dresource_dir=$ROOT/rsrc -Dno_unpack_resources=true"

# extract -D arguments so that we can put them before the classname
while [ ! -z "$1" ]; do
    case "$1" in
        -D*)
            SARGS="$SARGS $1"
            ;;

        *)
            NODE="$1"
            ;;
    esac
    shift
done
SARGS="$SARGS -Dnode=$NODE"

$ROOT/bin/runjava -- $SARGS $CLASS $ARGS
