#!/bin/sh
#
# $Id$
#
# Command line launcher for the Bang! development server

BANG_HOME=`dirname $0`/..
CLASS=com.threerings.bang.server.BangServer
HOSTNAME=`hostname`

# this may be overridden layer
NODE="frontier_town"
if [ ! -z "$1" ]; then
    NODE="$1"
    shift
fi

SERVER_MEMORY=384M
if [ -f $BANG_HOME/server.conf ]; then
    . $BANG_HOME/server.conf
else
    echo "Can't load $BANG_HOME/server.conf; can't run tool."
    exit 255
fi

# copy any built jar files into dist/lib
cd $BANG_HOME
ant copyresults

$BANG_HOME/bin/bangjava -server -Djava.awt.headless=true -mx$SERVER_MEMORY \
  -Dhostname=$HOSTNAME -Dnode=$NODE -Dis_node=true $CLASS $*
