#!/bin/sh
#
# $Id$
#
# Command line launcher for the Bang! development client

# parse our arguments
ARGS="localhost 47624"

while [ ! -z "$1" ]; do
    case "$1" in
        -test=*)
            BOARD=`echo $1 | sed 's:-test=::g'`;
            BOARD="-Dboard=$BOARD";
            TEST="-Dtest=true";
            ;;
        
        -test)
            TEST="-Dtest=true";
            ;;
        
        -build)
            ant
            if [ $? != 0 ]; then
                echo "Compilation failed."
                exit 255
            fi
            ;;

        *)
            ARGS="$ARGS $1"
            ;;
    esac
    shift
done

BANG_HOME=`dirname $0`/..
CARGS="-Dresource_dir=$BANG_HOME/rsrc"
CLASS=com.threerings.bang.client.BangApp
if [ -z "$BOARD" ]; then
    $BANG_HOME/bin/runjava -- -Dno_log_redir=true \
        $CARGS $TEST $CLASS $ARGS
else
    $BANG_HOME/bin/runjava -- -Dno_log_redir=true \
        $CARGS $TEST "$BOARD" $CLASS $ARGS
fi

xset r on
